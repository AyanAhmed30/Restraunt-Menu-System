//++++++++++++++++++++++++++++       ALL ITEMS   +++++++++++++++++++++++++++++++++
const allProduct = [{
    img: "https://tse3.mm.bing.net/th?id=OIP.TX5cvuJgfnEdPcvRUE0TSAHaFU&pid=Api&P=0&h=220",
    title: "Burger",
    Price: 20,
    id: 1,
    type: "fast food"
},

{
    img: "https://tse3.mm.bing.net/th?id=OIP.3MsHXdhbByfS3L4Nico6iAHaFj&pid=Api&P=0&h=220",
    title: "Sandwich",
    Price: 45,
    id: 2,
    type: "fast food"

},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.dE_Ldjd54S0OviazGJWF9QHaFj&pid=Api&P=0&h=220",
    title: "Karahi",
    Price: 38,
    id: 3,
    type: "desi"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.cYrcswnVg9-e7aOXqIFGdAHaE7&pid=Api&P=0&h=220",
    title: "Biryani",
    Price: 67,
    id: 4,
    type: "desi"

},
{
    img: "https://tse1.mm.bing.net/th?id=OIP.ZsAeILQ7BTJeJkWlww3hDwHaE7&pid=Api&P=0&h=220",
    title: "Fried Rice",
    Price: 31,
    id: 5,
    type: "desi"

},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.dsi4VJp7QtiKZWH1xsCTAAHaE8&pid=Api&P=0&h=220",
    title: "Chicken Wings",
    Price: 20,
    id: 6,
    type: "fast food"

},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.vI1bhl4zlQlTsfXZfIgunQHaE8&pid=Api&P=0&h=220",
    title: "Steaks",
    Price: 100,
    id: 7,
    type: "fast food"

},
{
    img: "https://tse1.mm.bing.net/th?id=OIP.4x9Pa22ZOhKmiUtszenbVQHaE8&pid=Api&P=0&h=220",
    title: "Haleem",
    Price: 29,
    id: 8,
    type: "desi"

},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.-5MZN0B4VLGQJs2_-ptYdAHaHa&pid=Api&P=0&h=220",
    title: "Cake",
    Price: 67,
    id: 9,
    type: "dessert"
},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.qPrKbQZU_8L0ZQ9YEyyrxgAAAA&pid=Api&P=0&h=220",
    title: "Gulab Jaman",
    Price: 56,
    id: 10,
    type: "dessert"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.oXfZuipBrkSA72X54Xom7wHaEK&pid=Api&P=0&h=220",
    title: "Paratha",
    Price: 10,
    id: 11,
    type: "desi"

},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.4FEfhcIZhLS2yaPisE-dbQHaE6&pid=Api&P=0&h=220",
    title: "Waffles",
    Price: 55,
    id: 12,
    type: "dessert"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.BAWsFu_tgdTWdqhb5hFvKAHaEj&pid=Api&P=0&h=220",
    title: "Daal Chawal",
    Price: 70,
    id: 13,
    type: "desi"

},
{
    img: "https://tse1.mm.bing.net/th?id=OIP.54H7cFwCZ16yDWwWuOAz1wHaEK&pid=Api&P=0&h=220",
    title: "Shawarma",
    Price: 102,
    id: 14,
    type: "desi"

},
{
    img: "https://tse2.mm.bing.net/th?id=OIP.VAULLDPEhS5-qWWgtYDQpwHaE8&pid=Api&P=0&h=220",
    title: "Pasta",
    Price: 120,
    id: 15,
    type: "fast food"

},
{
    img: "https://tse1.mm.bing.net/th?id=OIP.dMBEFsbm1fxFSONCn-39YQHaFj&pid=Api&P=0&h=220",
    title: "Nihari",
    Price: 86,
    id: 16,
    type: "desi"

},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.xLPSOI6ABE6wPrVYlmg6UgHaE8&pid=Api&P=0&h=220",
    title: "Zinger ",
    Price: 38,
    id: 17,
    type: "fast food"

},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.rCQScjlkIzF3Hv_rprbZAgHaHa&pid=Api&P=0&h=220",
    title: "Pastry ",
    Price: 24,
    id: 18,
    type: "Dessert"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.holHmftzMUgONoL-6n_dTQHaE7&pid=Api&P=0&h=220",
    title: "Pizza ",
    Price: 80,
    id: 19,
    type: "dessert"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.skg6HW0EIUuFk0FksTpzyQHaE8&pid=Api&P=0&h=220",
    title: "Fried Chicken",
    Price: 58,
    id: 20,
    type: "Chicken Fried"
},
{
    img: "https://tse4.mm.bing.net/th?id=OIP.rCBN1KPsIey7kMH4exNcsgHaFj&pid=Api&P=0&h=220",
    title: "Makhni",
    Price: 150,
    id: 21,
    type: "Makhni"
},
{
    img: "https://tse2.mm.bing.net/th?id=OIP.moZoTdE7FdR9fs6gelycRAHaE7&pid=Api&P=0&h=220",
    title: "Donut",
    Price: 25,
    id: 22,
},
{
    img: "https://tse3.mm.bing.net/th?id=OIP.RU9HgODKQS0xzEIpQnHEtQHaE8&pid=Api&P=0&h=220",
    title: "Chicken Roll",
    Price: 15,
    id: 23,
},

{
    img: "https://tse3.mm.bing.net/th?id=OIP.5s4P2oS79m2_rhdjNN8XwgHaHa&pid=Api&P=0&h=220",
    title: "Lasagna",
    Price: 60,
    id: 23,
},

];



//++++++++++++++++++++ WORKING FOR DISPLAY THE ITEMS ON SCREEN   +++++++++++++++++++++++++++
const productsContainer = document.querySelector(".allproducts");
//FUNCTION FOR DISPLAY PRODUCTS
function displayProducts(products) {
    let productCardsHTML = '';

    products.forEach(item => {
        productCardsHTML += `
            <div class="product">
                <img src="${item.img}" alt="${item.title}">
                <h4>${item.title}</h4>
                <h4>$${item.Price}</h4>
                <button class="add-btn" id="${item.id}">Add</button>
            </div>
        `;
    });

    productsContainer.innerHTML = productCardsHTML;

    // Add event listeners to the "Add" buttons of each product
    document.querySelectorAll('.add-btn').forEach(button => {
        button.addEventListener('click', () => {
            // Retrieve the product details
            const productId = parseInt(button.id);
            const selectedProduct = allProduct.find(product => product.id === productId);

            // Check if the item is already added to the total
            if (isItemAdded(productId)) {
                swal({
                    title: "Item Already Exist",
                    icon: "warning",
                    buttons: "ok",
                    dangerMode: false,
                })
                    ;
            } else {
                // Add the product to the total
                addToTotal(selectedProduct);
            }
        });
    });
}

// Initial rendering of all products
displayProducts(allProduct);

// Function to check if an item is already added to the total
function isItemAdded(itemId) {
    return addedItems.includes(itemId);
}




//++++++++++++++++++   WORKING ON TOTAL DIV +++++++++++++++++++++++++++++++++++++++++++++
//RENDER PRODUCTS ON TOTAL DIV
function addToTotal(item) {
    const totalContainer = document.querySelector('.total');

    const productEntry = document.createElement('div');
    productEntry.classList.add('order');
    productEntry.setAttribute('data-id', item.id);

    productEntry.innerHTML = `
        <img src="${item.img}" alt="">
        <div class="details">
            <h4>${item.title}</h4>
            <h4 class="price">$${item.Price}</h4>
            <div class="quantity">
                <button class="quantity-btn plus">+</button>
                <span class="quantity-value">1</span>
                <button class="quantity-btn minus">-</button>
            </div>
        </div>
    `;

    // Create the delete button for the product entry
    const deleteButton = createDeleteButton(item.id);
    productEntry.appendChild(deleteButton);
    totalContainer.appendChild(productEntry);
    swal({
        title: "Item Added",
        text: item.title + " has been added successfully",
        icon: "success",
        button: "Done",
    });
    addedItems.push(item.id);

    updateTotalPrice();

    // Add event listeners to quantity buttons
    const quantityValue = productEntry.querySelector('.quantity-value');
    const minusBtn = productEntry.querySelector('.quantity-btn.minus');
    const plusBtn = productEntry.querySelector('.quantity-btn.plus');
    const priceElement = productEntry.querySelector('.price');

    minusBtn.addEventListener('click', () => {
        let currentValue = parseInt(quantityValue.textContent);
        if (currentValue > 1) {
            currentValue--;
            quantityValue.textContent = currentValue;
            updateTotalPrice();
        }
    });
    plusBtn.addEventListener('click', () => {
        let currentValue = parseInt(quantityValue.textContent);
        currentValue++;
        quantityValue.textContent = currentValue;
        updateTotalPrice();
    });
    // UPDATING TOTAL PRICE BASED ON QUANTITY
    function updateTotalPrice() {
        let total = 0;
        document.querySelectorAll('.order').forEach(order => {
            const orderQuantity = parseInt(order.querySelector('.quantity-value').textContent);
            const orderPrice = parseFloat(order.querySelector('.price').textContent.replace('$', ''));
            total += orderQuantity * orderPrice;
        });
        totalPrice = total;
        const totalContainer = document.querySelector('.total h3');
        totalContainer.textContent = `Total Price: $${totalPrice.toFixed(2)}`;
    }
}
const addedItems = [];
let totalPrice = 0;
// FUNCTION FOR UPDATING TOTAL PRICE
function updateTotalPrice() {
    const totalContainer = document.querySelector('.total h3');
    totalContainer.textContent = `Total: $${totalPrice}`;
}
//FUNCTION FOR DELETE BUTTON
function createDeleteButton(productId) {
    const deleteButton = document.createElement('button');
    deleteButton.classList.add('delete-btn');
    deleteButton.textContent = 'Delete';
    deleteButton.addEventListener('click', () => removeItem(productId));
    return deleteButton;
}
// FUNCTION FOR REMOVING ITEM
function removeItem(productId) {
    const itemIndex = addedItems.indexOf(productId);
    if (itemIndex !== -1) {
        const removedItem = allProduct.find(product => product.id === productId);
        const removedQuantity = parseInt(document.querySelector(`.order[data-id="${productId}"] .quantity-value`).textContent);
        const removedPrice = removedItem.Price * removedQuantity; // Calculate price based on quantity
        totalPrice -= removedPrice;
        if (totalPrice < 0) totalPrice = 0;
        updateTotalPrice();
        document.querySelector(`.order[data-id="${productId}"]`).remove();
        addedItems.splice(itemIndex, 1);
    }
}





//+++++++++++++++++++      FILTERS OF NAV BAR ++++++++++++++++++++++++++++++++
// FUNCTION FOR SEARCHING ITEMS
function searchProducts() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase();
    const filteredProducts = allProduct.filter(product => product.title.toLowerCase().includes(searchInput));
    displayProducts(filteredProducts);
}
// FOR RESET OF SEARCH
function resetSearch() {
    document.getElementById('searchInput').value = ''; // Clear search input
    displayProducts(allProduct); // Display all products
}
// FUNCTION FOR FILTERING A PRICE
function filterByPrice() {
    let minPrice = parseInt(document.getElementById('minPrice').value) || 0;
    let maxPrice = parseInt(document.getElementById('maxPrice').value) || Infinity;

    const filteredProducts = allProduct.filter(product => product.Price >= minPrice && product.Price <= maxPrice);
    displayProducts(filteredProducts);
}

// FOR RESET A FILTERING PRICE
function resetFilters() {
    document.getElementById('searchInput').value = '';
    document.getElementById('minPrice').value = '';
    document.getElementById('maxPrice').value = '';
    displayProducts(allProduct);
}
// ADD EVENT LISTENERS FOR FILTERS
document.getElementById('searchBtn').addEventListener('click', searchProducts);
document.getElementById('filterBtn').addEventListener('click', filterByPrice);
document.getElementById('resetButton').addEventListener('click', resetFilters);
document.getElementById('resetSearch').addEventListener('click', resetSearch);





//++++++++++++++++++++++++++    FUNCTIONALITY FOR SCROLLUP AND SCROLL DOWN BUTTON   ++++++++++++++++
const scrollToTopButton = document.getElementById('scrollToTop');
const scrollToBottomButton = document.getElementById('scrollToBottom');

scrollToTopButton.addEventListener('click', function () {
    window.scrollTo({ top: 0, behavior: 'smooth' });
    scrollToBottomButton.style.display = 'block';
    scrollToTopButton.style.display = 'none';
});

scrollToBottomButton.addEventListener('click', function () {
    const windowHeight = window.innerHeight;
    const documentHeight = document.documentElement.scrollHeight;
    window.scrollTo({ top: documentHeight - windowHeight, behavior: 'smooth' });
    scrollToBottomButton.style.display = 'none';
    scrollToTopButton.style.display = 'block';
});
